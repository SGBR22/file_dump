<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–æ–∏ –∑–∞–∫–ª–∞–¥–∫–∏</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: sans-serif; background: #f5f5f5; padding: 20px; }
        h1 { text-align: center; margin-bottom: 20px; }
        .container { max-width: 1200px; margin: 0 auto; }
        
        /* –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å */
        .admin-bar { background: white; padding: 15px 20px; border-radius: 8px; margin-bottom: 20px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 10px; }
        .admin-bar .user { color: #666; }
        .admin-bar input { padding: 8px 12px; border: 1px solid #ddd; border-radius: 4px; width: 150px; }
        .admin-bar button { padding: 8px 16px; border: none; border-radius: 4px; cursor: pointer; }
        .admin-bar .btn-login { background: #28a745; color: white; }
        .admin-bar .btn-logout { background: #dc3545; color: white; }
        .admin-bar .btn-add { background: #007bff; color: white; margin-left: 10px; }
        .is-admin .admin-panel { display: block; }
        .guest-only { display: none; }
        .is-admin .guest-only { display: none !important; }
        
        /* –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è */
        .add-form { background: white; padding: 20px; border-radius: 8px; margin-bottom: 30px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); display: none; }
        .add-form.show { display: block; }
        .add-form h2 { margin-bottom: 15px; }
        .add-form input, .add-form textarea, .add-form select { width: 100%; padding: 10px; margin-bottom: 10px; border: 1px solid #ddd; border-radius: 4px; }
        .add-form button { padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; margin-right: 10px; }
        .add-form .btn-cancel { background: #6c757d; }
        
        /* –ü–æ–∏—Å–∫ */
        .search { margin-bottom: 20px; }
        .search input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; }
        
        /* –§–∏–ª—å—Ç—Ä—ã */
        .filters { margin-bottom: 20px; display: flex; gap: 10px; flex-wrap: wrap; }
        .filters button { padding: 8px 16px; border: 1px solid #007bff; background: white; color: #007bff; border-radius: 4px; cursor: pointer; }
        .filters button.active { background: #007bff; color: white; }
        
        /* –°–µ—Ç–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ */
        .content-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; }
        
        /* –ö–∞—Ä—Ç–æ—á–∫–∞ */
        .card { background: white; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 5px rgba(0,0,0,0.1); cursor: pointer; transition: transform 0.2s; position: relative; }
        .card:hover { transform: translateY(-3px); }
        .card-preview { height: 150px; background: #eee; display: flex; align-items: center; justify-content: center; overflow: hidden; }
        .card-preview img { width: 100%; height: 100%; object-fit: cover; }
        .card-preview .placeholder { color: #999; font-size: 40px; }
        .card-type { position: absolute; top: 10px; left: 10px; background: rgba(0,0,0,0.6); color: white; padding: 5px 10px; border-radius: 20px; font-size: 12px; }
        .card-preview { position: relative; }
        .card-body { padding: 15px; }
        .card-title { font-weight: bold; margin-bottom: 8px; }
        .card-desc { color: #666; font-size: 14px; margin-bottom: 10px; }
        .card-tags { display: flex; gap: 5px; flex-wrap: wrap; }
        .card-tags span { background: #e9ecef; padding: 3px 8px; border-radius: 12px; font-size: 12px; color: #666; }
        .card-date { color: #999; font-size: 12px; margin-top: 10px; }
        .delete-btn { position: absolute; top: 10px; right: 10px; background: red; color: white; border: none; width: 30px; height: 30px; border-radius: 50%; cursor: pointer; opacity: 0; font-size: 18px; line-height: 1; }
        .card:hover .delete-btn { opacity: 1; }
        
        /* –ü—É—Å—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ */
        .empty { text-align: center; padding: 50px; color: #999; grid-column: 1 / -1; }
        
        /* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å—Ç–∞—Ç—å–∏ */
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 1000; overflow: auto; }
        .modal.show { display: block; }
        .modal-content { background: white; margin: 50px auto; padding: 30px; max-width: 800px; border-radius: 8px; max-height: 80vh; overflow-y: auto; }
        .modal-close { position: fixed; top: 20px; right: 30px; color: white; font-size: 30px; cursor: pointer; }
        .modal h2 { margin-bottom: 15px; }
        .modal .tags { margin-top: 20px; }
        .modal .date { color: #999; margin-bottom: 20px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>–ú–æ–∏ –∑–∞–∫–ª–∞–¥–∫–∏</h1>
        
        <!-- –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å -->
        <div class="admin-bar" id="adminBar">
            <div class="user" id="userInfo">–ì–æ—Å—Ç—å (—Ç–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä)</div>
            <div id="adminControls">
                <input type="password" id="adminPass" placeholder="–ü–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∞">
                <button class="btn-login" onclick="loginAdmin()">–í–æ–π—Ç–∏</button>
            </div>
            <div id="adminActions" style="display:none;">
                <button class="btn-add" onclick="toggleAddForm()">+ –î–æ–±–∞–≤–∏—Ç—å</button>
                <button class="btn-logout" onclick="logoutAdmin()">–í—ã–π—Ç–∏</button>
            </div>
        </div>
        
        <!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è -->
        <div class="add-form" id="addForm">
            <h2>–î–æ–±–∞–≤–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª</h2>
            <select id="contentType">
                <option value="link">–°—Å—ã–ª–∫–∞</option>
                <option value="image">–§–æ—Ç–æ</option>
                <option value="video">–í–∏–¥–µ–æ</option>
                <option value="article">–°—Ç–∞—Ç—å—è</option>
            </select>
            <input type="text" id="contentTitle" placeholder="–ó–∞–≥–æ–ª–æ–≤–æ–∫">
            <input type="text" id="contentUrl" placeholder="–°—Å—ã–ª–∫–∞ / URL">
            <textarea id="contentBody" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ –∏–ª–∏ —Ç–µ–∫—Å—Ç —Å—Ç–∞—Ç—å–∏" rows="5"></textarea>
            <input type="text" id="contentTags" placeholder="–¢–µ–≥–∏ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)">
            <button onclick="addContent()">–î–æ–±–∞–≤–∏—Ç—å</button>
            <button class="btn-cancel" onclick="toggleAddForm()">–û—Ç–º–µ–Ω–∞</button>
        </div>
        
        <div class="search">
            <input type="text" id="searchInput" placeholder="–ü–æ–∏—Å–∫..." oninput="renderContent()">
        </div>
        
        <div class="filters">
            <button class="active" onclick="setFilter('all')">–í—Å–µ</button>
            <button onclick="setFilter('link')">–°—Å—ã–ª–∫–∏</button>
            <button onclick="setFilter('image')">–§–æ—Ç–æ</button>
            <button onclick="setFilter('video')">–í–∏–¥–µ–æ</button>
            <button onclick="setFilter('article')">–°—Ç–∞—Ç—å–∏</button>
        </div>
        
        <div class="content-grid" id="contentGrid"></div>
    </div>

    <!-- –ú–æ–¥–∞–ª–∫–∞ —Å—Ç–∞—Ç—å–∏ -->
    <div class="modal" id="articleModal" onclick="closeModal(event)">
        <span class="modal-close" onclick="closeModal(event)">&times;</span>
        <div class="modal-content" onclick="event.stopPropagation()">
            <h2 id="modalTitle"></h2>
            <div class="date" id="modalDate"></div>
            <div id="modalBody"></div>
            <div class="tags" id="modalTags"></div>
        </div>
    </div>

    <script>
        // –•—Ä–∞–Ω–∏–ª–∏—â–µ
        let content = JSON.parse(localStorage.getItem('myContent')) || [];
        let adminPass = localStorage.getItem('adminPass') || '';
        let isAdmin = false;
        let currentFilter = 'all';
        
        // –ò–∫–æ–Ω–∫–∏
        const icons = {
            link: 'üîó',
            image: 'üñºÔ∏è',
            video: 'üé¨',
            article: 'üìÑ'
        };
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        function checkAdmin() {
            if (adminPass) {
                document.getElementById('adminPass').value = adminPass;
            }
        }
        
        // –í—Ö–æ–¥ –∞–¥–º–∏–Ω–∞
        function loginAdmin() {
            const pass = document.getElementById('adminPass').value.trim();
            if (!pass) { alert('–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å!'); return; }
            
            // –ï—Å–ª–∏ –ø–∞—Ä–æ–ª—å –µ—â—ë –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω - —Å–æ–∑–¥–∞—ë–º
            if (!adminPass) {
                if (confirm('–°–æ–∑–¥–∞—Ç—å —ç—Ç–æ—Ç –ø–∞—Ä–æ–ª—å –∫–∞–∫ –ø–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞?')) {
                    adminPass = pass;
                    localStorage.setItem('adminPass', adminPass);
                    isAdmin = true;
                    updateAdminUI();
                }
            } else if (pass === adminPass) {
                isAdmin = true;
                updateAdminUI();
            } else {
                alert('–ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å!');
            }
        }
        
        // –í—ã—Ö–æ–¥
        function logoutAdmin() {
            isAdmin = false;
            updateAdminUI();
        }
        
        // –û–±–Ω–æ–≤–∏—Ç—å UI –∞–¥–º–∏–Ω–∞
        function updateAdminUI() {
            const controls = document.getElementById('adminControls');
            const actions = document.getElementById('adminActions');
            const userInfo = document.getElementById('userInfo');
            const body = document.body;
            
            if (isAdmin) {
                controls.style.display = 'none';
                actions.style.display = 'flex';
                userInfo.textContent = '–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä';
                body.classList.add('is-admin');
            } else {
                controls.style.display = 'flex';
                actions.style.display = 'none';
                userInfo.textContent = '–ì–æ—Å—Ç—å (—Ç–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä)';
                body.classList.remove('is-admin');
                document.getElementById('addForm').classList.remove('show');
            }
        }
        
        // –ü–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å —Ñ–æ—Ä–º—É –¥–æ–±–∞–≤–ª–µ–Ω–∏—è
        function toggleAddForm() {
            document.getElementById('addForm').classList.toggle('show');
        }
        
        // –î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç
        function addContent() {
            const type = document.getElementById('contentType').value;
            const title = document.getElementById('contentTitle').value.trim();
            const url = document.getElementById('contentUrl').value.trim();
            const body = document.getElementById('contentBody').value.trim();
            const tags = document.getElementById('contentTags').value.trim();
            
            if (!title) { alert('–í–≤–µ–¥–∏—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫!'); return; }
            if (type !== 'article' && !url) { alert('–í–≤–µ–¥–∏—Ç–µ —Å—Å—ã–ª–∫—É!'); return; }
            
            const item = {
                id: Date.now(),
                type,
                title,
                url: type === 'article' ? '' : url,
                body: body,
                tags: tags ? tags.split(',').map(t => t.trim()) : [],
                date: new Date().toLocaleDateString('ru')
            };
            
            content.unshift(item);
            save();
            renderContent();
            clearForm();
            toggleAddForm();
        }
        
        // –£–¥–∞–ª–∏—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç
        function deleteItem(id, e) {
            e.stopPropagation();
            if (confirm('–£–¥–∞–ª–∏—Ç—å?')) {
                content = content.filter(c => c.id !== id);
                save();
                renderContent();
            }
        }
        
        // –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
        function save() {
            localStorage.setItem('myContent', JSON.stringify(content));
        }
        
        // –û—á–∏—Å—Ç–∏—Ç—å —Ñ–æ—Ä–º—É
        function clearForm() {
            document.getElementById('contentTitle').value = '';
            document.getElementById('contentUrl').value = '';
            document.getElementById('contentBody').value = '';
            document.getElementById('contentTags').value = '';
        }
        
        // –§–∏–ª—å—Ç—Ä
        function setFilter(filter) {
            currentFilter = filter;
            document.querySelectorAll('.filters button').forEach(b => b.classList.remove('active'));
            event.target.classList.add('active');
            renderContent();
        }
        
        // –û—Ç–∫—Ä—ã—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç
        function openContent(item) {
            if (item.type === 'article') {
                document.getElementById('modalTitle').textContent = item.title;
                document.getElementById('modalDate').textContent = item.date;
                document.getElementById('modalBody').innerHTML = item.body.replace(/\n/g, '<br>');
                document.getElementById('modalTags').innerHTML = item.tags.map(t => `<span style="background:#e9ecef;padding:3px 8px;border-radius:12px;font-size:12px;margin-right:5px;">${t}</span>`).join('');
                document.getElementById('articleModal').classList.add('show');
            } else if (item.url) {
                window.open(item.url, '_blank');
            }
        }
        
        // –ó–∞–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª–∫—É
        function closeModal(e) {
            if (e.target === e.currentTarget || e.target.classList.contains('modal-close')) {
                document.getElementById('articleModal').classList.remove('show');
            }
        }
        
        // –û—Ç—Ä–µ–Ω–¥–µ—Ä–∏—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç
        function renderContent() {
            const search = document.getElementById('searchInput').value.toLowerCase();
            const grid = document.getElementById('contentGrid');
            
            let filtered = content;
            
            if (currentFilter !== 'all') {
                filtered = filtered.filter(c => c.type === currentFilter);
            }
            
            if (search) {
                filtered = filtered.filter(c => 
                    c.title.toLowerCase().includes(search) ||
                    c.tags.some(t => t.toLowerCase().includes(search))
                );
            }
            
            if (filtered.length === 0) {
                grid.innerHTML = '<div class="empty">–ü—É—Å—Ç–æ. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤—ã–π –º–∞—Ç–µ—Ä–∏–∞–ª!</div>';
                return;
            }
            
            grid.innerHTML = filtered.map(item => `
                <div class="card" onclick="openContent(${JSON.stringify(item)})">
                    <div class="card-preview">
                        ${item.type === 'image' && item.url ? `<img src="${item.url}" onerror="this.parentElement.innerHTML='<div class=\\'placeholder\\'>${icons[item.type]}</div>'">` : `<div class="placeholder">${icons[item.type]}</div>`}
                        <div class="card-type">${icons[item.type]} ${item.type === 'link' ? '–°—Å—ã–ª–∫–∞' : item.type === 'image' ? '–§–æ—Ç–æ' : item.type === 'video' ? '–í–∏–¥–µ–æ' : '–°—Ç–∞—Ç—å—è'}</div>
                        <button class="delete-btn" onclick="deleteItem(${item.id}, event)">√ó</button>
                    </div>
                    <div class="card-body">
                        <div class="card-title">${item.title}</div>
                        ${item.body ? `<div class="card-desc">${item.body.substring(0, 100)}</div>` : ''}
                        ${item.tags.length > 0 ? `<div class="card-tags">${item.tags.map(t => `<span>${t}</span>`).join('')}</div>` : ''}
                        <div class="card-date">${item.date}</div>
                    </div>
                </div>
            `).join('');
        }
        
        // –°–∫—Ä—ã—Ç—å –ø–æ–ª–µ URL –¥–ª—è —Å—Ç–∞—Ç–µ–π
        document.getElementById('contentType').addEventListener('change', function() {
            const urlInput = document.getElementById('contentUrl');
            if (this.value === 'article') {
                urlInput.style.display = 'none';
                urlInput.placeholder = '';
            } else {
                urlInput.style.display = 'block';
                urlInput.placeholder = this.value === 'image' ? 'URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è' : this.value === 'video' ? 'URL –≤–∏–¥–µ–æ' : '–°—Å—ã–ª–∫–∞';
            }
        });
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.getElementById('contentUrl').style.display = 'block';
        checkAdmin();
        updateAdminUI();
        renderContent();
    </script>
</body>
</html>
